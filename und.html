<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supply Management System</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">

</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="logo" alt="Logo.img"></a>
    <a class="navbar-brand" href="#"></a>
   
    </div>
</nav>
<div class="fade-in">
<div class="container">
    <h1><i class="bi bi-database-fill-add"></i> UPDATE</h1>
    <form id="update-form" action="update.php" method="post">
        <label for="update-section">Section:</label>
        <select id="update-section" name="sections" required>
            <option value="" disabled selected>Please Select a Section.</option>
            <option value="ss">Supply Section</option>
            <option value="um">University Material</option>
            <option value="pps">Printer/Photocopies Section</option>
            <option value="ls">Library Section</option>
        </select>

        <label for="item">Item_Name:</label>
        <input type="text" id="item-name" name="item">

        <label for="product.no">Product_Number:</label>
        <input type="number" id="product_num" name="product_num" maxlength="10" required>
        <label for="quantity">Quantity:</label>
        <input type="number" id="quantity" name="quantity">

        <label for="price">Price:</label>
        <input type="number" id="price" name="price" step="0.01">

        <label for="date">Date_arrival</label>
        <input type="date" id="date" name="date">

        <label for="update-department">Department:</label>
        <select id="update-department" name="department">
            <option value="" disabled selected>Please Select a Department.</option>
            <option value="CAS">CAS</option>
            <option value="CAHS">CAHS</option>
            <option value="CBA">CBA</option>
            <option value="CCST">CCST</option>
            <option value="CHK">CHK</option>
            <option value="COA">COA</option>
            <option value="COE">COE</option>
            <option value="CTE">CTE</option>
            <option value="CTHM">CTHM</option>
            <option value="GRADUATE SCHOOL">GRADUATE SCHOOL</option>
            <option value="ACADEMIC AFFAIR OFFICE">ACADEMIC AFFAIR OFFICE</option>
            <option value="ADMISSION OFFICE">ADMISSION OFFICE</option>
            <option value="CANTEEN">CANTEEN</option>
            <option value="CLINIC">CLINIC</option>
            <option value="DMST OFFICE">DMST OFFICE</option>
            <option value="FINANCE OFFICE">FINANCE OFFICE</option>
            <option value="GUIDANCE OFFICE">GUIDANCE OFFICE</option>
            <option value="MIS OFFICE">MIS OFFICE</option>
            <option value="NSTP OFFICE">NSTP OFFICE</option>
            <option value="PRESIDENT'S OFFICE">PRESIDENT'S OFFICE</option>
            <option value="REGISTRAR'S OFFICE">REGISTRAR'S OFFICE</option>
            <option value="STUDENT AFFAIRS OFFICE">STUDENT AFFAIRS OFFICE</option>
            <option value="VICE PRESIDENT'S OFFICE">VICE PRESIDENT'S OFFICE</option>
        </select>

        <p></p>

        <div id="update-subjectField" style="display: none;">
            <label for="subject">Subject (only for Library Section)</label>
            <input type="text" id="subject" name="subject">
        </div>

        <button type="submit" class="btn btn-outline-info" > <i class="bi bi-plus-circle"></i>
            UPDATE</button>
        <input type="hidden" name="submit" required>
    </form>
</div>
<div class="fade-in">
    <div class="container">
        <h1><i class="bi bi-database-fill-x"></i> DELETE</h1>
        <form id="delete-form" action="delete.php" method="post" onsubmit="return confirmDelete()">
            <label for="delete-section">Section:</label>
            <select id="delete-section" name="sections" required>
                <option value="" disabled selected>Please Select a Section.</option>
                <option value="ss">Supply Section</option>
                <option value="um">University Material</option>
                <option value="pps">Printer/Photocopies Section</option>
                <option value="ls">Library Section</option>
            </select>

            <label for="product.no">Product_Number:</label>
            <input type="number" id="product_num" name="product_num" maxlength="10" required>

            <label for="delete-department">Department:</label>
            <select id="delete-department" name="department" required>
                <option value="" disabled selected>Please Select a Department.</option>
                <option value="CAS">CAS</option>
                <option value="CAHS">CAHS</option>
                <option value="CBA">CBA</option>
                <option value="CCST">CCST</option>
                <option value="CHK">CHK</option>
                <option value="COA">COA</option>
                <option value="COE">COE</option>
                <option value="CTE">CTE</option>
                <option value="CTHM">CTHM</option>
                <option value="GRADUATE SCHOOL">GRADUATE SCHOOL</option>
                <option value="ACADEMIC AFFAIR OFFICE">ACADEMIC AFFAIR OFFICE</option>
                <option value="ADMISSION OFFICE">ADMISSION OFFICE</option>
                <option value="CANTEEN">CANTEEN</option>
                <option value="CLINIC">CLINIC</option>
                <option value="DMST OFFICE">DMST OFFICE</option>
                <option value="FINANCE OFFICE">FINANCE OFFICE</option>
                <option value="GUIDANCE OFFICE">GUIDANCE OFFICE</option>
                <option value="MIS OFFICE">MIS OFFICE</option>
                <option value="NSTP OFFICE">NSTP OFFICE</option>
                <option value="PRESIDENT'S OFFICE">PRESIDENT'S OFFICE</option>
                <option value="REGISTRAR'S OFFICE">REGISTRAR'S OFFICE</option>
                <option value="STUDENT AFFAIRS OFFICE">STUDENT AFFAIRS OFFICE</option>
                <option value="VICE PRESIDENT'S OFFICE">VICE PRESIDENT'S OFFICE</option>
            </select>

            <p></p>

            <div id="delete-subjectField" style="display: none;">
                <label for="subject">Subject (only for Library Section)</label>
                <input type="text" id="subject" name="subject">
            </div>
            
            <!-- Checkbox to delete all data in the supplies table -->
            <input type="checkbox" id="delete-all-supplies" name="delete_all_supplies" onchange="toggleInputFields()">
            <label for="delete-all-supplies">Delete all data in the supplies table</label>

            <button type="submit" class="btn btn-outline-warning"><i class="bi bi-trash3-fill"></i>
                DELETE</button>
            <input type="hidden" name="submit" required>
        </form>
    </div>
</div>

</div>
<div class="container">
<div class="fade-in">
<button class="btn btn-danger w-80 " type="button" data-bs-toggle="offcanvas" data-bs-target="#staticBackdrop" aria-controls="staticBackdrop"> <i class="bi bi-back"></i>
    EXIT/Check Data </button>
</div>
</div>

   <div class="offcanvas offcanvas-start text-bg-dark" data-bs-backdrop="static" tabindex="-1" id="staticBackdrop" aria-labelledby="staticBackdropLabel">
     <div class="offcanvas-header">
       <h5 class="offcanvas-title" id="staticBackdropLabel"> <i class="bi bi-plus-circle"></i> <i class="bi bi-trash3-fill"></i>
        UPDATE/DELETE </h5>
       <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
     </div>
     <div class="offcanvas-body">
       <div>
       </div>
       <div class="dropdown mt-3">
         <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
        <span class="dropdown-toggle-text"> </span>
         </button>

        <ul class="dropdown-menu">
           <li><a class="btn btn-primary dropdown-item" href="data.php"> <i class="bi bi-back"></i>
            Check Data</a></li>
            
           <li><a class="btn btn-danger dropdown-item" href="Supply Section.html"> <i class="bi bi-back"></i>
            Go back</a></li>
         </ul>
       </div>
     </div>
   </div>


<script>
    function toggleSubject(form, prefix) {
        var section = form.querySelector("#" + prefix + "-section").value;
        var subjectField = form.querySelector("#" + prefix + "-subjectField");

        if (section === "ls") {
            subjectField.style.display = "block";
        } else {
            subjectField.style.display = "none";
        }
    }

    function toggleDepartment(selectElement, prefix) {
        var section = selectElement.value;
        var departmentSelect = document.getElementById(prefix + "-department");

        if (section === "ls") {
            departmentSelect.disabled = true;
        } else {
            departmentSelect.disabled = false;
        }
    }

    document.addEventListener("DOMContentLoaded", function() {
        var updateForm = document.getElementById("update-form");
        var deleteForm = document.getElementById("delete-form");

        updateForm.addEventListener("change", function() {
            toggleSubject(updateForm, "update");
            toggleDepartment(updateForm.querySelector("#update-section"), "update");
        });

        deleteForm.addEventListener("change", function() {
            toggleSubject(deleteForm, "delete");
            toggleDepartment(deleteForm.querySelector("#delete-section"), "delete");
        });
    });
</script>

<!-- Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" 
integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>
<script>
    function confirmDelete() {
        // Check if the checkbox to delete all data in supplies table is checked
        if (document.getElementById('delete-all-supplies').checked) {
            // Show confirmation dialog
            var confirmation = confirm("Are you sure you want to delete all data in the supplies table?");
            return confirmation; // Allow form submission only if user confirms
        }
        return true; // Allow form submission if checkbox is not checked
    }

    function toggleInputFields() {
        // Check if the checkbox to delete all data in supplies table is checked
        var isChecked = document.getElementById('delete-all-supplies').checked;
        var inputs = document.querySelectorAll('#delete-form input[type="text"], #delete-form select');

        // Enable/disable all input fields based on the checkbox
        inputs.forEach(function(input) {
            input.disabled = isChecked;
            if (isChecked) {
                input.removeAttribute('required');
            } else {
                input.setAttribute('required', 'required');
            }
        });
    }
</script>


</body>
</html>
